threadlib := 
rtlib :=

ext = .exe
remove = del

#compiler flags
cf := /EHsc /W3
cf += /D"DEBUG"
cf += /D"WIN32"


default: run_Timer_test run_debug_test run_utils_test run_PoolStored_test run_Ref_test run_Signal_test



run_utils_test: utils_test$(ext)
	@echo running $^...
	@./$^

utils_test$(ext): src/utils_test.cpp
	@echo Building $@...
	@cl $(cf) $(threadlib) $(rtlib) $<




run_debug_test: debug_test$(ext)
	@echo running  $^...
	@./$^

debug_test$(ext): src/debug_test.cpp
	@echo Building $@...
	@cl $(cf) $(threadlib) $(rtlib) $<




run_PoolStored_test: PoolStored_test$(ext)
	@echo running $^...
	@./$^

PoolStored_test$(ext): src/PoolStored_test.cpp
	@echo Building $@...
	@cl $(cf) $(threadlib) $(rtlib) $<



run_Timer_test: Timer_test$(ext)
	@echo running $^...
	@./$^

Timer_test$(ext): src/Timer_test.cpp
	@echo Building $@...
	@cl $(cf) $(threadlib) $(rtlib) $<



run_Ref_test: Ref_test$(ext)
	@echo running $^...
	@./$^

Ref_test$(ext): src/Ref_test.cpp
	@echo Building $@...
	@cl $(cf) $<



run_Signal_test: Signal_test$(ext)
	@echo running $^...
	@./$^

Signal_test$(ext): src/Signal_test.cpp
	@echo Building $@...
	@cl $(cf) $<



clean:
	@$(remove) debug_test$(ext) debug_test.obj
	@$(remove) utils_test$(ext) utils_test.obj
	@$(remove) PoolStored_test$(ext) PoolStored_test.obj
	@$(remove) Timer_test$(ext) Timer_test.obj
	@$(remove) Ref_test$(ext) Ref_test.obj
	@$(remove) Signal_test$(ext) Signal_test.obj


